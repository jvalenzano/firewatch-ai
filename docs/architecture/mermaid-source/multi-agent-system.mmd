---
title: RisenOne Fire Analysis Agent - Multi-Agent Architecture
---
graph TB
    %% User Interface Layer
    User[ğŸ‘¨â€ğŸ”¬ Forest Service Scientist] 
    WebUI[ğŸŒ ADK Web Interface<br/>localhost:8000]
    CLI[ğŸ’» CLI Interface<br/>adk run data_science]
    
    User --> WebUI
    User --> CLI
    
    %% Core Agent System - Vertex AI Platform
    subgraph VertexAI [ğŸ”¥ Vertex AI Agent Engine - GCP]
        direction TB
        
        subgraph RootAgent [ğŸ“‹ Fire Analysis Coordinator]
            direction TB
            Router[ğŸ§  Query Router<br/>Intent Classification]
            Context[ğŸ“ Conversation Manager<br/>Session Memory]
            Formatter[ğŸ“Š Response Formatter<br/>User-friendly Output]
        end
        
        subgraph SubAgents [ğŸ¤– Specialized Sub-Agents]
            direction TB
            
            subgraph DatabaseAgent [ğŸ’¾ Database Agent]
                NL2SQL[ğŸ”„ Natural Language to SQL<br/>Fire-optimized queries]
                QueryOptimizer[âš¡ Query Optimizer<br/>BigQuery performance]
                DataValidator[âœ… Data Validator<br/>Safety-critical checks]
            end
            
            subgraph DataIntegration [ğŸ”— Data Integration Engine]
                SyntheticGen[ğŸ² Synthetic Data Generator<br/>Realistic test scenarios]
                HistoricalData[ğŸ“š Historical Data Manager<br/>Fire occurrence records]
                DataMesh[ğŸ•¸ï¸ Data Mesh Interface<br/>AWS integration bridge]
            end
            
            subgraph Geographic [ğŸ—ºï¸ Geographic Foundation]
                GeoSpatial[ğŸ“ Geospatial Analysis<br/>Location-based queries]
                Mapping[ğŸ—ºï¸ Interactive Mapping<br/>Fire zone visualization]
                Coordinates[ğŸ“ Coordinate Systems<br/>Multi-format support]
            end
            
            subgraph Analytics [ğŸ“Š Analytics Agent]
                StatAnalysis[ğŸ“ˆ Statistical Analysis<br/>Fire trend modeling]
                Correlation[ğŸ”— Correlation Engine<br/>Weather-fire relationships]
                Reporting[ğŸ“‹ Report Generation<br/>Executive summaries]
            end
            
            subgraph BQML [ğŸ§  BigQuery ML Agent]
                MLPipelines[ğŸ”¬ ML Pipelines<br/>Fire spread prediction]
                ModelTraining[ğŸ¯ Model Training<br/>Historical fire data]
                Prediction[ğŸ”® Prediction Engine<br/>Risk forecasting]
            end
        end
        
        %% Fire Calculations Module
        subgraph FireCalc [ğŸ”¥ Fire Calculations Engine]
            direction TB
            NFDRS[ğŸ“Š NFDRS Engine<br/>National Fire Danger Rating]
            FuelMoisture[ğŸ’§ Fuel Moisture Calculator<br/>Dead/Live fuel analysis]
            SpreadComponent[ğŸŒ¬ï¸ Spread Component<br/>Wind-driven calculations]
            BurningIndex[ğŸ”¥ Burning Index<br/>Fire intensity predictions]
            DangerRating[âš ï¸ Danger Classification<br/>LOW â†’ EXTREME ratings]
        end
    end
    
    %% External Data Sources & Integration Layer
    subgraph AWS [â˜ï¸ AWS Data Platform - Existing Infrastructure]
        direction TB
        
        subgraph WeatherData [ğŸŒ¤ï¸ Weather Data Sources]
            NOAA[ğŸŒ¡ï¸ NOAA Weather Service<br/>Real-time conditions]
            Forecasts[ğŸ“… 7-Day Forecasts<br/>Temperature, humidity, wind]
            Historical[ğŸ“Š Historical Weather<br/>Trend analysis]
        end
        
        subgraph FireSystems [ğŸ”¥ Fire Management Systems]
            WFMI[ğŸš¨ Wildfire Management Info<br/>Active fire incidents]
            CrewTracking[ğŸ‘¥ Crew Tracking<br/>Resource deployment]
            EquipmentDB[ğŸš› Equipment Database<br/>Asset management]
        end
        
        subgraph DataMeshAWS [ğŸ•¸ï¸ Data Mesh Platform]
            DataLake[ğŸï¸ Data Lake<br/>Structured/unstructured data]
            Analytics[ğŸ“Š Analytics Services<br/>Existing BI tools]
            Security[ğŸ” Security Layer<br/>IAM, encryption]
        end
    end
    
    %% BigQuery Data Layer
    subgraph BigQuery [ğŸ“Š BigQuery - Fire Risk POC Dataset]
        direction TB
        FireOccurrence[ğŸ”¥ Fire Occurrence Table<br/>Historical incidents]
        WeatherStations[ğŸŒ¡ï¸ Weather Station Data<br/>Meteorological records]
        RiskMetrics[ğŸ“ˆ Risk Metrics<br/>Calculated danger indices]
        MLTrainingData[ğŸ¯ ML Training Data<br/>Feature engineering]
    end
    
    %% Connections - Agent Communication
    WebUI --> RootAgent
    CLI --> RootAgent
    
    Router --> DatabaseAgent
    Router --> DataIntegration
    Router --> Geographic
    Router --> Analytics
    Router --> BQML
    Router --> FireCalc
    
    Context <--> Router
    Formatter <-- Router
    
    %% Fire Calculations Flow
    NFDRS --> FuelMoisture
    FuelMoisture --> SpreadComponent
    SpreadComponent --> BurningIndex
    BurningIndex --> DangerRating
    
    %% Data Flow Connections
    DatabaseAgent --> BigQuery
    DataIntegration --> DataMeshAWS
    Geographic --> BigQuery
    Analytics --> BigQuery
    BQML --> MLTrainingData
    
    %% AWS Integration Bridge
    DataMesh --> WeatherData
    DataMesh --> FireSystems
    DataMesh --> DataMeshAWS
    
    %% External Data Ingestion
    NOAA --> WeatherStations
    WFMI --> FireOccurrence
    Historical --> RiskMetrics
    
    %% AI Model Configuration
    subgraph ModelConfig [ğŸ¤– AI Model Configuration]
        RootModel[ğŸ§  Root Agent Model<br/>gemini-2.0-flash-001]
        SubModel[ğŸ¤– Sub-Agent Models<br/>gemini-2.0-flash-001]
        ModelParams[âš™ï¸ Model Parameters<br/>Temperature: 0.3, Top-p: 0.8]
    end
    
    RootAgent -.-> RootModel
    SubAgents -.-> SubModel
    
    %% Deployment Pipeline
    subgraph Deployment [ğŸš€ Deployment Pipeline]
        ADKBuild[ğŸ“¦ ADK Build Process<br/>poetry build]
        VertexDeploy[â˜ï¸ Vertex AI Deployment<br/>Agent Engine]
        Monitoring[ğŸ“Š Production Monitoring<br/>Performance & errors]
    end
    
    %% Styling
    classDef userLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef agentLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef dataLayer fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef fireCalc fill:#ffebee,stroke:#b71c1c,stroke-width:2px
    classDef awsLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef deployment fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    
    class User,WebUI,CLI userLayer
    class VertexAI,RootAgent,SubAgents,DatabaseAgent,DataIntegration,Geographic,Analytics,BQML agentLayer
    class BigQuery,FireOccurrence,WeatherStations,RiskMetrics,MLTrainingData dataLayer
    class FireCalc,NFDRS,FuelMoisture,SpreadComponent,BurningIndex,DangerRating fireCalc
    class AWS,WeatherData,FireSystems,DataMeshAWS awsLayer
    class Deployment,ADKBuild,VertexDeploy,Monitoring deployment